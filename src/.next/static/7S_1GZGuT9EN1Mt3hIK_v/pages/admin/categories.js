(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"Qxc+":function(e,t,n){"use strict";n.r(t);var a=n("NthX"),r=n.n(a),o=n("mK0O"),c=n("mXGw"),s=n.n(c),i=n("CafY"),u=n("czhI"),l=n.n(u),p=n("4/PI"),b=(n("v1MJ"),n("rOcY")),h=n.n(b),f=(n("sucu"),n("vj+v")),m=n("i5qa"),d=s.a.createElement;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=Object(c.useState)([]),n=t[0],a=t[1],r=Object(c.useState)(""),o=r[0],s=r[1],u=Object(c.useState)(!1),b=u[0],m=u[1];Object(c.useEffect)((function(){a(e.categories)}),[]);var g=function(e,t){switch(console.log(e,t),e){case"POST_COMPOSITON":""!=t?(m(!0),l.a.post(h.a.host.base+h.a.path.base.categories,{name:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+(new f.a).get("user").token}}).then((function(e){n.unshift(e.data),a(n),p.b.success("Th\xeam th\xe0nh c\xf4ng !",{autoClose:3e3}),s("")})).catch((function(e){console.log("POST_COMPOSITON",e),p.b.error("Kh\xf4ng th\xe0nh c\xf4ng !",{autoClose:3e3})})).finally((function(e){m(!1)}))):p.b.error("B\u1ea1n ch\u01b0a nh\u1eadp th\xe0nh ph\u1ea7n !",{autoClose:3e3});break;case"DELETE":m(!0),console.log(h.a.host.base+h.a.path.base.categories+"/"+t.item.id),l.a.delete(h.a.host.base+h.a.path.base.categories+"/"+t.item.id,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+(new f.a).get("user").token}}).then((function(e){n.splice(t.index,1),a(n),p.b.success("Xo\xe1 th\xe0nh c\xf4ng !",{autoClose:3e3})})).catch((function(e){console.log("POST_COMPOSITON",e),p.b.error("Kh\xf4ng th\xe0nh c\xf4ng !",{autoClose:3e3})})).finally((function(e){m(!1)}))}};return d(i.a,{title:"Danh m\u1ee5c",compositions:e.compositions,categories:e.categories},d("div",{className:"composition px-md-4 px-3"},d("div",{className:"py-5"},d("div",{className:"row align-items-end"},d("div",{className:"col-xl-6 col-lg-7 col-sm-9 col-12"},d("h5",null,"Danh m\u1ee5c"),d("input",{type:"text",className:"form-control mb-sm-0 mb-3",multiple:!0,value:o,onChange:function(e){!function(e){s(e.target.value)}(e)},onKeyPress:function(e){"Enter"==e.key&&g("POST_COMPOSITON",o)}})),d("div",{className:"col-3"},b?d("div",{className:"spinner-border text-primary",role:"status"},d("span",{className:"sr-only"},"Loading...")):d("button",{type:"button",className:"btn btn-primary text-uppercase font-weight-bold",onClick:function(){return g("POST_COMPOSITON",o)}},"Th\xeam")))),d("div",{className:"row"},n&&n.map((function(e,t){return d("div",{className:"col-lg-3 col-md-4 col-sm-6 col-12"},d("li",{className:"list-group-item d-flex justify-content-between align-items-center px-3 my-3"},e.name,d("span",{className:"badge badge-danger cursor-pointer ml-2",onClick:function(){return g("DELETE",{item:e,index:t})}},d("span",{ariaHidden:"true"},"\xd7"))))})))))}w.getInitialProps=function(e){var t,n,a,o,c,s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=[],e.req,n=e.res,e.query,a=new f.a,o=a.get("user"),i.next=6,r.a.awrap(Object(m.a)());case 6:if(c=i.sent,!o){i.next=15;break}return i.next=10,r.a.awrap(l.a.get(h.a.host.base+h.a.path.base.categories).catch((function(e){return console.log("Error: ",e.code)})));case 10:return s=i.sent,t=s&&s.data?s.data:[],i.abrupt("return",O({},c,{categories:t}));case 15:n.redirect("/");case 16:return i.abrupt("return",O({},c));case 17:case"end":return i.stop()}}),null,null,null,Promise)},t.default=w},bBpE:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories",function(){return n("Qxc+")}])},i5qa:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("NthX"),r=n.n(a),o=n("czhI"),c=n.n(o),s=n("rOcY"),i=n.n(s);function u(){var e,t,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=[],t=[],o.next=4,r.a.awrap(c.a.get(i.a.host.base+i.a.path.base.categories,{timeout:5e3}).catch((function(e){console.log("Error: ",e.code)})));case 4:return n=o.sent,o.next=7,r.a.awrap(c.a.get(i.a.host.base+i.a.path.base.compositions,{timeout:5e3}).catch((function(e){return console.log("Error: ",e.code)})));case 7:return a=o.sent,e=n&&void 0!=n.data?n.data:[],t=void 0!=(a&&a.data)?a.data:[],console.log(t),o.abrupt("return",{compositions:t,categories:e});case 12:case"end":return o.stop()}}),null,null,null,Promise)}},mK0O:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))}},[["bBpE",1,2,4,0,3,5,6,7]]]);