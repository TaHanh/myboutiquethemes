{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{\"73K0\":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/compositions\",function(){return t(\"N8KS\")}])},N8KS:function(e,n,t){\"use strict\";t.r(n);var a=t(\"NthX\"),o=t.n(a),s=t(\"mXGw\"),c=t.n(s),r=t(\"CafY\"),i=t(\"czhI\"),u=t.n(i),l=t(\"4/PI\"),p=(t(\"v1MJ\"),t(\"rOcY\")),m=t.n(p),h=(t(\"sucu\"),t(\"vj+v\")),d=c.a.createElement;function f(e){var n=Object(s.useState)([]),t=n[0],a=n[1],o=Object(s.useState)(\"\"),c=o[0],i=o[1],p=Object(s.useState)(!1),f=p[0],b=p[1];Object(s.useEffect)((function(){a(e.compositions)}),[]);var g=function(e,n){switch(console.log(e,n),e){case\"POST_COMPOSITON\":\"\"!=n?(b(!0),u.a.post(m.a.host.base+m.a.path.base.compositions,{name:n}).then((function(e){t.unshift(e.data),a(t),l.b.success(\"Th\\xeam th\\xe0nh c\\xf4ng !\",{autoClose:3e3}),i(\"\")})).catch((function(e){console.log(\"POST_COMPOSITON\",e),l.b.error(\"Kh\\xf4ng th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).finally((function(e){b(!1)}))):l.b.error(\"B\\u1ea1n ch\\u01b0a nh\\u1eadp th\\xe0nh ph\\u1ea7n !\",{autoClose:3e3});break;case\"DELETE\":b(!0),u.a.delete(m.a.host.base+m.a.path.base.compositions+\"/\"+n.item.id,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+(new h.a).get(\"user\").token}}).then((function(e){t.splice(n.index,1),a(t),l.b.success(\"Xo\\xe1 th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).catch((function(e){console.log(\"POST_COMPOSITON\",e),l.b.error(\"Kh\\xf4ng th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).finally((function(e){b(!1)}))}};return d(r.a,{title:\"Th\\xe0nh ph\\u1ea7n\"},d(\"div\",{className:\"composition px-md-4 px-3\"},d(\"div\",{className:\"py-5\"},d(\"div\",{className:\"row align-items-end\"},d(\"div\",{className:\"col-xl-6 col-lg-7 col-sm-9 col-12\"},d(\"h5\",null,\"Th\\xe0nh ph\\u1ea7n\"),d(\"input\",{type:\"text\",className:\"form-control mb-sm-0 mb-3\",multiple:!0,value:c,onChange:function(e){!function(e){i(e.target.value)}(e)},onKeyPress:function(e){\"Enter\"==e.key&&g(\"POST_COMPOSITON\",c)}})),d(\"div\",{className:\"col-3\"},f?d(\"div\",{className:\"spinner-border text-primary\",role:\"status\"},d(\"span\",{className:\"sr-only\"},\"Loading...\")):d(\"button\",{type:\"button\",className:\"btn btn-primary text-uppercase font-weight-bold\",onClick:function(){return g(\"POST_COMPOSITON\",c)}},\"Th\\xeam\")))),d(\"div\",{className:\"row\"},t&&t.map((function(e,n){return d(\"div\",{className:\"col-lg-3 col-md-4 col-sm-6 col-12\"},d(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center px-3 my-3\"},e.name,d(\"span\",{className:\"badge badge-danger cursor-pointer ml-2\",onClick:function(){return g(\"DELETE\",{item:e,index:n})}},d(\"span\",{ariaHidden:\"true\"},\"\\xd7\"))))})))))}f.getInitialProps=function(e){var n,t,a,s;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(n=[],e.req,t=e.res,e.query,a=new h.a,!a.get(\"user\")){c.next=12;break}return c.next=7,o.a.awrap(u.a.get(m.a.host.base+m.a.path.base.compositions).catch((function(e){return console.log(\"Error: \",e.code)})));case 7:return s=c.sent,n=s&&s.data||[],c.abrupt(\"return\",{compositions:n});case 12:t.redirect(\"/\");case 13:return c.abrupt(\"return\");case 14:case\"end\":return c.stop()}}),null,null,null,Promise)},n.default=f}},[[\"73K0\",1,2,4,0,3,5,6,7]]]);"}