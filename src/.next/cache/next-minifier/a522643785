{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{ULJw:function(e,t,n){\"use strict\";n.r(t);var o=n(\"NthX\"),a=n.n(o),s=n(\"mXGw\"),c=n.n(s),r=n(\"CafY\"),l=n(\"czhI\"),u=n.n(l),i=n(\"4/PI\"),p=(n(\"v1MJ\"),n(\"rOcY\")),h=n.n(p),m=(n(\"sucu\"),n(\"vj+v\")),b=n(\"uiLY\"),d=c.a.createElement;function f(e){var t=Object(s.useState)(e.data),n=t[0],o=t[1],a=Object(s.useState)(\"\"),c=a[0],l=a[1],p=Object(s.useState)(!1),f=p[0],w=p[1],g=Object(s.useState)(\"\"),y=g[0],v=g[1];Object(s.useEffect)((function(){var e=(new m.a).get(\"user\");console.log(e),e&&v(e.token)}),[]);var N=function(e,t){switch(console.log(e,t),e){case\"POST\":\"\"!=t?(w(!0),u.a.post(h.a.host.base+h.a.path.base.youtubes,{title:\"\",link:t},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+y}}).then((function(e){console.log(e.data),n.rows.unshift(e.data),o(n),i.b.success(\"Th\\xeam th\\xe0nh c\\xf4ng !\",{autoClose:3e3}),l(\"\")})).catch((function(e){console.log(\"POST\",e),i.b.error(\"Kh\\xf4ng th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).finally((function(e){w(!1)}))):i.b.error(\"B\\u1ea1n ch\\u01b0a nh\\u1eadp th\\xe0nh ph\\u1ea7n !\",{autoClose:3e3});break;case\"DELETE\":w(!0),u.a.delete(h.a.host.base+h.a.path.base.youtubes+\"/\"+t.item.id,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+y}}).then((function(e){n.rows.splice(t.index,1),o(n),i.b.success(\"Xo\\xe1 th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).catch((function(e){console.log(\"POST\",e),i.b.error(\"Kh\\xf4ng th\\xe0nh c\\xf4ng !\",{autoClose:3e3})})).finally((function(e){w(!1)}))}};return d(r.a,{title:\"Glowish's Youtube\"},d(\"div\",{className:\"composition px-md-4 px-3\"},d(\"div\",{className:\"py-5\"},d(\"div\",{className:\"row align-items-end\"},d(\"div\",{className:\"col-xl-6 col-lg-7 col-sm-9 col-12\"},d(\"input\",{type:\"text\",className:\"form-control mb-sm-0 mb-3\",multiple:!0,value:c,onChange:function(e){!function(e){l(e.target.value)}(e)},onKeyPress:function(e){\"Enter\"==e.key&&N(\"POST\",c)},placeholder:\"Th\\xeam link youtube\"})),d(\"div\",{className:\"col-3\"},f?d(\"div\",{className:\"spinner-border text-primary\",role:\"status\"},d(\"span\",{className:\"sr-only\"},\"Loading...\")):d(\"button\",{type:\"button\",className:\"btn btn-primary text-uppercase font-weight-bold\",onClick:function(){return N(\"POST\",c)}},\"Th\\xeam\")))),d(\"div\",{className:\"row\"},n&&n.rows&&n.rows.map((function(e,t){return d(\"div\",{className:\"col-lg-3 col-md-4 col-sm-6 col-12\"},d(\"li\",{className:\"list-group-item text-center my-3\"},d(\"iframe\",{width:\"100%\",src:\"https://www.youtube.com/embed/\"+Object(b.b)(e.link),frameborder:\"0\",allow:\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",allowfullscreen:!0}),d(\"button\",{className:\"btn btn-outline-danger btn-sm\",onClick:function(){return N(\"DELETE\",{item:e,index:t})}},\"Xo\\xe1\")))})))))}f.getInitialProps=function(e){var t,n,o,s;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=[],e.req,n=e.res,e.query,o=new m.a,!o.get(\"user\")){c.next=13;break}return c.next=7,a.a.awrap(u.a.get(h.a.host.base+h.a.path.base.youtubes).catch((function(e){return console.log(\"Error: \",e.code)})));case 7:return s=c.sent,console.log(s),t=s&&s.data?s.data:[],c.abrupt(\"return\",{data:t});case 13:n.redirect(\"/\");case 14:case\"end\":return c.stop()}}),null,null,null,Promise)},t.default=f},ZAKn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/youtube\",function(){return n(\"ULJw\")}])}},[[\"ZAKn\",1,2,4,0,3,5,6,7]]]);"}