{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { useState, useEffect, useRef, Component } from 'react';\nimport dynamic from 'next/dynamic';\nimport { EditorState, convertToRaw, ContentState, convertFromHTML } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport Axios from 'axios';\nimport config from '../config';\nimport { uploadCallback } from '../utils/upload';\nvar WysiwygNoSSRWrapper = dynamic(() => import('react-draft-wysiwyg').then(mod => mod.Editor), {\n  loading: () => null,\n  ssr: false\n});\n\nclass WysiwygEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"toolbar\", {\n      options: ['inline', 'blockType', 'fontSize', 'list', 'textAlign', 'link', 'emoji', 'image', 'remove', 'history'],\n      inline: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['bold', 'italic', 'underline', 'strikethrough', 'monospace']\n      },\n      blockType: {\n        inDropdown: true,\n        options: ['Normal', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'Blockquote', 'Code'],\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined\n      },\n      fontSize: {\n        options: [8, 9, 10, 11, 12, 14, 16, 18, 24, 30, 36, 48, 60, 72, 96],\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined\n      },\n      list: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['unordered', 'ordered', 'indent', 'outdent']\n      },\n      textAlign: {\n        inDropdown: true,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['left', 'center', 'right', 'justify']\n      },\n      link: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        dropdownClassName: undefined,\n        showOpenOptionOnHover: true,\n        defaultTargetOption: '_self',\n        options: ['link', 'unlink'],\n        linkCallback: undefined\n      },\n      emoji: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        emojis: ['😀', '😁', '😂', '😃', '😉', '😋', '😎', '😍', '😗', '🤗', '🤔', '😣', '😫', '😴', '😌', '🤓', '😛', '😜', '😠', '😇', '😷', '😈', '👻', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '🙈', '🙉', '🙊', '👼', '👮', '🕵', '💂', '👳', '🎅', '👸', '👰', '👲', '🙍', '🙇', '🚶', '🏃', '💃', '⛷', '🏂', '🏌', '🏄', '🚣', '🏊', '⛹', '🏋', '🚴', '👫', '💪', '👈', '👉', '👉', '👆', '🖕', '👇', '🖖', '🤘', '🖐', '👌', '👍', '👎', '✊', '👊', '👏', '🙌', '🙏', '🐵', '🐶', '🐇', '🐥', '🐸', '🐌', '🐛', '🐜', '🐝', '🍉', '🍄', '🍔', '🍤', '🍨', '🍪', '🎂', '🍰', '🍾', '🍷', '🍸', '🍺', '🌍', '🚑', '⏰', '🌙', '🌝', '🌞', '⭐', '🌟', '🌠', '🌨', '🌩', '⛄', '🔥', '🎄', '🎈', '🎉', '🎊', '🎁', '🎗', '🏀', '🏈', '🎲', '🔇', '🔈', '📣', '🔔', '🎵', '🎷', '💰', '🖊', '📅', '✅', '❎', '💯']\n      },\n      embedded: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        embedCallback: undefined,\n        defaultSize: {\n          height: 'auto',\n          width: 'auto'\n        }\n      },\n      image: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        urlEnabled: true,\n        uploadEnabled: true,\n        alignmentEnabled: true,\n        previewImage: false,\n        inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\n        uploadCallback: this.upload,\n        alt: {\n          present: false,\n          mandatory: false\n        },\n        defaultSize: {\n          height: 'auto',\n          width: 'auto'\n        }\n      },\n      remove: {\n        className: undefined,\n        component: undefined\n      },\n      history: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['undo', 'redo']\n      }\n    });\n\n    _defineProperty(this, \"setEditor\", editor => {\n      this.editor = editor;\n    });\n\n    _defineProperty(this, \"onEditorStateChange\", editorState => {\n      this.setState({\n        editorState\n      });\n      this.props.callBack('EDITOR', draftToHtml(convertToRaw(editorState.getCurrentContent())));\n    });\n\n    this.state = {\n      editorState: EditorState.createEmpty()\n    };\n  }\n\n  componentDidMount() {\n    var value = this.props.valueTxt;\n\n    if (value && value != '') {\n      var contentState = ContentState.createFromBlockArray(convertFromHTML(value));\n      var editorState = EditorState.createWithContent(contentState);\n      this.setState({\n        editorState: editorState\n      });\n    }\n  }\n\n  upload(file) {\n    return new Promise((resolve, reject) => {\n      var formData = new FormData();\n      formData.append('image', file);\n      Axios.post(config.host.upload + config.path.upload.upFile, formData, {\n        'Content-Type': 'multipart/form-data'\n      }).then(res => {\n        console.log(res);\n        resolve({\n          data: {\n            link: config.host.upload + '/' + res.data.imageLink\n          }\n        });\n      }).catch(err => {\n        console.log('error upload ', err);\n      });\n    });\n  }\n\n  render() {\n    var {\n      editorState\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(WysiwygNoSSRWrapper, {\n      ref: this.setEditor,\n      editorState: editorState,\n      wrapperClassName: \"wysiwyg-wrapper\",\n      editorClassName: \"wysiwyg-editor\",\n      onEditorStateChange: this.onEditorStateChange,\n      toolbar: this.toolbar\n    }));\n  }\n\n}\n\nexport default WysiwygEditor;","map":null,"metadata":{},"sourceType":"module"}