{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport WysiwygEditor from '../components/wysiwyg-editor';\nimport Layout from '../components/layout';\nimport '../static/styles/post.scss';\nimport '../static/styles/react-draft-wysiwyg.scss';\nimport { useState } from 'react';\nimport Axios from 'axios';\nimport { uploadCallback } from '../utils/upload';\n\nfunction Post(props) {\n  var _useState = useState(''),\n      imgSrc = _useState[0],\n      setImg = _useState[1];\n\n  var _useState2 = useState(''),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var refFile = React.createRef();\n\n  var _useState3 = useState(''),\n      valueTxt = _useState3[0],\n      setValue = _useState3[1];\n\n  var changeImg = function changeImg(file) {\n    // var reader = new FileReader()\n    // reader.readAsDataURL(file)\n    // reader.onloadend = function (e) {\n    //   setImg(reader.result)\n    // }.bind(this)\n    setImg(URL.createObjectURL(file));\n    setFile(file);\n  };\n\n  var callBack = function callBack(key, value) {\n    console.log(key, value);\n\n    switch (key) {\n      case 'EDITOR':\n        break;\n\n      case 'UPFILE':\n        uploadCallback(value).then(function (res) {\n          console.log(res.imageLink);\n        })[\"catch\"](function (err) {\n          console.log('err', err);\n        });\n        break;\n\n      default:\n        break;\n    }\n  }; // const uploadCallback = (file) => {\n  //   return new Promise((resolve, reject) => {\n  //     let formData = new FormData()\n  //     formData.append('image', file)\n  //     Axios.post('http://1.2.3.127:9000/multers', formData, {\n  //       'Content-Type': 'multipart/form-data',\n  //     })\n  //       .then((res) => {\n  //         resolve({ data: { link: res.data } })\n  //       })\n  //       .catch((err) => {\n  //         console.log('error upload ', err)\n  //       })\n  //   })\n  // }\n\n\n  return __jsx(Layout, {\n    title: 'Blush'\n  }, __jsx(\"div\", {\n    className: \"post px-md-4 px-3\"\n  }, __jsx(\"div\", {\n    className: \"py-md-5 pb-5\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-8 mb-md-0 mb-3\"\n  }, __jsx(\"h5\", null, \"Ti\\xEAu \\u0111\\u1EC1\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    multiple: true\n  })), __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"div\", {\n    className: \"post-image\"\n  }, __jsx(\"input\", {\n    ref: refFile,\n    type: \"file\",\n    onChange: function onChange(e) {\n      return changeImg(e.target.files[0]);\n    },\n    className: \"d-none\"\n  }), __jsx(\"div\", {\n    className: \"border border-secondary post-image-container\",\n    title: \"\\u1EA2nh b\\xE0i vi\\u1EBFt\"\n  }, imgSrc ? __jsx(\"img\", {\n    src: imgSrc,\n    style: {\n      objectFit: 'cover'\n    },\n    className: \"w-100 h-100\"\n  }) : __jsx(\"p\", null, \"\\u1EA2nh b\\xE0i vi\\u1EBFt\"), __jsx(\"button\", {\n    className: \"btn btn-outline-danger post-image-btn\",\n    onClick: function onClick() {\n      refFile.current.click();\n    }\n  }, __jsx(\"i\", {\n    \"class\": \"fas fa-upload\"\n  }))))))), __jsx(\"div\", null, __jsx(\"h5\", {\n    className: \"mb-3\"\n  }, \"N\\u1ED9i dung b\\xE0i vi\\u1EBFt\"), __jsx(WysiwygEditor, {\n    callBack: callBack,\n    valueTxt: valueTxt\n  })), __jsx(\"div\", {\n    className: \"row justify-content-center pt-5 mx-0\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-danger text-uppercase font-weight-bold\",\n    onClick: function onClick() {\n      return callBack('UPFILE', file);\n    }\n  }, \"\\u0110\\u0103ng b\\xE0i\"))));\n}\n\nexport default Post;","map":null,"metadata":{},"sourceType":"module"}