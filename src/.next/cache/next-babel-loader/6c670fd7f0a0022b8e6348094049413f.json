{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Router from 'next/router';\nimport { useRouter } from 'next/router';\nimport '../../static/styles/blush-classic.scss';\nimport Layout from '../../components/layout';\nimport Aside from '../../components/aside';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport config from '../../config';\nimport Axios from 'axios';\nimport moment from 'moment';\nimport { inject, observer } from 'mobx-react';\nimport { getInitialDataAside } from '../../store/data';\nimport { convertTitle } from '../../utils/convert';\n\nvar PostDetail = function PostDetail(props) {\n  var _useState = useState(false),\n      isSearch = _useState[0],\n      changeSearch = _useState[1];\n\n  var routes = useRouter();\n  console.log('PostDetail', props.store.likesCount);\n  useEffect(function () {\n    console.log('PostDetail likesCount', props.store.likesCount);\n  }, []);\n\n  var callBack = function callBack(key, value) {\n    console.log(key, value);\n\n    switch (key) {\n      case 'CHECK_SEARCH':\n        changeSearch(!isSearch);\n        break;\n\n      case 'SEARCH':\n        changeSearch(false);\n        alert(value);\n\n      default:\n        break;\n    }\n  };\n\n  return __jsx(Layout, {\n    title: 'Beauty Favorites for Summer â€“ Blush ',\n    callBack: callBack,\n    isSearch: isSearch,\n    categories: props.categories,\n    compositions: props.compositions\n  }, __jsx(\"div\", {\n    className: \"site-branding\"\n  }, __jsx(Link, {\n    href: \"/blush-classic\"\n  }, __jsx(\"img\", {\n    src: require('../../static/images/blush_title.png')\n  }))), __jsx(\"div\", {\n    className: \"site-content\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-8\"\n  }, __jsx(\"div\", {\n    className: \"site-main\"\n  }, __jsx(\"div\", {\n    className: \"detail-entry-thumbnail\"\n  }, __jsx(\"img\", {\n    src: config.host.upload + props.data.image\n  })), __jsx(\"div\", {\n    className: \"detail-post-header\"\n  }, __jsx(\"div\", {\n    className: \"detail-post-entry-meta\"\n  }, __jsx(\"span\", {\n    className: \"cat-links\"\n  }, props.data.tags && props.data.tags.map(function (item, index) {\n    return __jsx(\"a\", {\n      href: item\n    }, item, index != props.data.tags.length - 1 ? ', ' : null);\n  })), \"|\", __jsx(\"span\", {\n    className: \"posted-on\"\n  }, __jsx(\"time\", null, moment(props.data.updatedAt || props.data.createdAt).format('DD. MMM YYYY')))), __jsx(\"h1\", {\n    className: \"detail-post-entry-title\"\n  }, props.data.title)), __jsx(\"div\", {\n    className: \"detail-post-entry-content\"\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.data.content\n    }\n  })), props.posts && props.posts.length > 0 ? __jsx(\"div\", {\n    className: \"related-posts\"\n  }, __jsx(\"h3\", {\n    className: \"related-title\"\n  }, \"Related Posts\"), __jsx(\"div\", {\n    className: \"featured\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, props.posts.map(function (item, index) {\n    return __jsx(\"div\", {\n      className: \"col-md-4 col-sm-6 col-12\"\n    }, __jsx(\"div\", {\n      className: \"detail-post\"\n    }, __jsx(\"div\", {\n      className: \"entry-thumbnail\"\n    }, __jsx(Link, {\n      href: config.client.posts + '/' + convertTitle(item.title) + '_' + item.idPost\n    }, __jsx(\"a\", null, __jsx(\"div\", {\n      style: {\n        backgroundImage: 'url(' + \"\".concat(config.host.upload + item.image) + ')',\n        backgroundPosition: 'center center',\n        backgroundSize: 'cover'\n      }\n    }, __jsx(\"img\", {\n      style: {\n        visibility: 'hidden'\n      },\n      src: require('../../static/images/f1.jpg')\n    }))))), __jsx(\"div\", {\n      className: \"entry-header\"\n    }, __jsx(\"div\", {\n      className: \"entry-title max-line\"\n    }, __jsx(Link, {\n      href: config.client.posts + '/' + convertTitle(item.title) + '_' + item.idPost\n    }, __jsx(\"a\", null, item.title))), __jsx(\"div\", {\n      className: \"posted-on\"\n    }, __jsx(\"time\", null, moment(item.updatedAt || item.createdAt).format('DD. MMM YYYY'))))));\n  })))) : null)), __jsx(\"div\", {\n    className: \"col-lg-4\"\n  }, __jsx(Aside, {\n    categories: props.categories,\n    compositions: props.compositions\n  })))));\n};\n\nPostDetail.getInitialProps = function _callee(ctx) {\n  var req, res, query, data, posts, resPost, resPostDetail, dataa;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          req = ctx.req, res = ctx.res, query = ctx.query;\n          data = {};\n          posts = {};\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.client.postsCategory + query.category + '?page=1&&limit=3')[\"catch\"](function (e) {\n            console.log('Error: ', e.code);\n          }));\n\n        case 5:\n          resPost = _context.sent;\n          posts = resPost && resPost.data != undefined ? resPost.data : [];\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.path.base.posts + '/' + query.id)[\"catch\"](function (e) {\n            console.log('Error: ', e.code);\n            res.redirect('/');\n          }));\n\n        case 9:\n          resPostDetail = _context.sent;\n          data = resPostDetail && resPostDetail.data != undefined ? resPostDetail.data : [];\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(getInitialDataAside());\n\n        case 13:\n          dataa = _context.sent;\n          return _context.abrupt(\"return\", _objectSpread({}, dataa, {\n            data: data,\n            posts: posts\n          }));\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default inject('store')(observer(PostDetail));","map":null,"metadata":{},"sourceType":"module"}