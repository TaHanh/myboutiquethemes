{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Layout from \"../../components/layout\";\nimport \"../../static/styles/home.scss\";\nimport Aside from \"../../components/aside\";\nimport { useState, useEffect } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Link from \"next/link\";\nimport config from \"../../config\";\nimport Axios from \"axios\";\nimport { getInitialData } from \"../../store/data\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { convertTitle } from \"../../utils/convert\";\nimport { getInitialDataAside } from \"../../store/data\";\n\nvar FilterPost = function FilterPost(props) {\n  var _useState = useState(props.data),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoad = _useState2[0],\n      setLoad = _useState2[1];\n\n  var _useState3 = useState(true),\n      isLoadBtn = _useState3[0],\n      setLoadBtn = _useState3[1];\n\n  var _useState4 = useState(1),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  useEffect(function () {}, []);\n  return __jsx(Layout, {\n    title: \"Blush\",\n    compositions: props.compositions,\n    categories: props.categories\n  }, __jsx(\"div\", {\n    className: \"site-branding\"\n  }, __jsx(Link, {\n    href: \"/blush-classic\"\n  }, __jsx(\"img\", {\n    src: require(\"../../static/images/blush_title.png\")\n  }))), __jsx(\"div\", {\n    className: \"site-content\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-8\"\n  }, __jsx(\"div\", {\n    className: \"site-main\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, data && data.length > 0 ? data.map(function (item, index) {\n    return __jsx(\"div\", {\n      className: \"col-md-6 col-12\"\n    }, __jsx(\"div\", {\n      className: \"card-post\"\n    }, __jsx(\"div\", {\n      className: \"card-entry-thumbnail\"\n    }, __jsx(Link, {\n      href: config.client.posts + \"/\" + convertTitle(item.title) + \"_\" + item.idPost\n    }, __jsx(\"a\", null, __jsx(\"div\", {\n      style: {\n        backgroundImage: \"url(\" + \"\".concat(config.host.upload + item.image) + \")\",\n        backgroundPosition: \"center center\",\n        backgroundSize: \"cover\"\n      }\n    }, __jsx(\"img\", {\n      style: {\n        visibility: \"hidden\"\n      },\n      src: require(\"../../static/images/f1.jpg\")\n    }))))), __jsx(\"div\", {\n      className: \"card-entry-body\"\n    }, __jsx(\"div\", {\n      className: \"card-entry-header\"\n    }, __jsx(\"h2\", {\n      className: \"card-entry-title max-line\"\n    }, __jsx(Link, {\n      href: config.client.posts + \"/\" + convertTitle(item.title) + \"_\" + item.idPost\n    }, __jsx(\"a\", null, item.title)))), __jsx(\"div\", {\n      className: \"card-entry-content\"\n    }, __jsx(\"p\", {\n      className: \"max-line\"\n    }, item.description), __jsx(\"div\", {\n      className: \"card-entry-meta\"\n    }, item.tags && item.tags.map(function (e, i) {\n      return __jsx(Link, {\n        href: config.client.tags + convertTitle(e)\n      }, __jsx(\"a\", null, e, \" \", i != item.tags.length - 1 ? \", \" : null));\n    })), __jsx(Link, {\n      href: config.client.posts + \"/\" + convertTitle(item.title) + \"_\" + item.idPost\n    }, __jsx(\"a\", {\n      className: \"readmore\"\n    }, __jsx(\"button\", {\n      className: \"btn read-more\"\n    }, \"Read more\")))))));\n  }) : __jsx(\"h5\", null, \"Kh\\xF4ng c\\xF3 b\\xE0i vi\\u1EBFt n\\xE0o ph\\xF9 h\\u1EE3p !\")))), __jsx(\"div\", {\n    className: \"col-lg-4\"\n  }, __jsx(Aside, {\n    categories: props.categories,\n    compositions: props.compositions\n  })))));\n};\n\nFilterPost.getInitialProps = function _callee(ctx) {\n  var req, res, query, data, resTag, resCom, resCate, content, _res, dataa;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          req = ctx.req, res = ctx.res, query = ctx.query;\n          data = {};\n          _context.t0 = query.filterPost;\n          _context.next = _context.t0 === \"tags\" ? 5 : _context.t0 === \"compositions\" ? 11 : _context.t0 === \"categories\" ? 18 : _context.t0 === \"search\" ? 25 : 34;\n          break;\n\n        case 5:\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.path.base.tags + \"/\" + query.name)[\"catch\"](function (e) {\n            console.log(\"Error: \", e.code);\n          }));\n\n        case 7:\n          resTag = _context.sent;\n          console.log(resTag.data);\n          data = resTag && resTag.data != undefined ? resTag.data : [];\n          return _context.abrupt(\"break\", 35);\n\n        case 11:\n          console.log(config.host.base + config.path.base.compositionsPost + query.name + \".\" + query.id);\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.path.base.compositionsPost + query.name + \".\" + query.id)[\"catch\"](function (e) {\n            console.log(\"Error: \", e.code);\n          }));\n\n        case 14:\n          resCom = _context.sent;\n          console.log(resCom.data);\n          data = resCom && resCom.data != undefined ? resCom.data : [];\n          return _context.abrupt(\"break\", 35);\n\n        case 18:\n          console.log(config.host.base + config.path.base.categoriesPosts + query.name + \".\" + query.id);\n          _context.next = 21;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.path.base.categoriesPosts + query.name + \".\" + query.id)[\"catch\"](function (e) {\n            console.log(\"Error: \", e.code);\n          }));\n\n        case 21:\n          resCate = _context.sent;\n          console.log(resCate.data);\n          data = resCate && resCate.data != undefined ? resCate.data : [];\n          return _context.abrupt(\"break\", 35);\n\n        case 25:\n          content = query.name.replace(\"-\", \" \");\n          console.log(\"content\", content);\n          console.log(config.host.base + config.path.base.postsFind + content);\n          _context.next = 30;\n          return _regeneratorRuntime.awrap(Axios.get(config.host.base + config.path.base.postsFind + content)[\"catch\"](function (e) {\n            console.log(\"Error: \", e.code);\n          }));\n\n        case 30:\n          _res = _context.sent;\n          console.log(_res);\n          data = _res && _res.data != undefined ? _res.data : [];\n          return _context.abrupt(\"break\", 35);\n\n        case 34:\n          return _context.abrupt(\"break\", 35);\n\n        case 35:\n          _context.next = 37;\n          return _regeneratorRuntime.awrap(getInitialDataAside());\n\n        case 37:\n          dataa = _context.sent;\n          return _context.abrupt(\"return\", _objectSpread({}, dataa, {\n            data: data\n          }));\n\n        case 39:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default FilterPost;","map":null,"metadata":{},"sourceType":"module"}