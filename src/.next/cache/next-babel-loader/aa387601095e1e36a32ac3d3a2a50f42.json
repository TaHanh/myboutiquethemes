{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { useState, useEffect, useRef, Component } from 'react';\nimport dynamic from 'next/dynamic';\nimport { EditorState, convertToRaw, ContentState, convertFromHTML } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport Axios from 'axios';\nimport config from '../config';\nimport { uploadCallback } from '../utils/upload';\nvar WysiwygNoSSRWrapper = dynamic(function () {\n  return import('react-draft-wysiwyg').then(function (mod) {\n    return mod.Editor;\n  });\n}, {\n  loading: function loading() {\n    return null;\n  },\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-draft-wysiwyg')];\n    },\n    modules: ['react-draft-wysiwyg']\n  }\n});\n\nvar WysiwygEditor = /*#__PURE__*/function (_Component) {\n  _inherits(WysiwygEditor, _Component);\n\n  var _super = _createSuper(WysiwygEditor);\n\n  function WysiwygEditor(props) {\n    var _this;\n\n    _classCallCheck(this, WysiwygEditor);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"toolbar\", {\n      options: ['inline', 'blockType', 'fontSize', 'list', 'textAlign', 'link', 'emoji', 'image', 'remove', 'history'],\n      inline: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['bold', 'italic', 'underline', 'strikethrough', 'monospace']\n      },\n      blockType: {\n        inDropdown: true,\n        options: ['Normal', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'Blockquote', 'Code'],\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined\n      },\n      fontSize: {\n        options: [8, 9, 10, 11, 12, 14, 16, 18, 24, 30, 36, 48, 60, 72, 96],\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined\n      },\n      list: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['unordered', 'ordered', 'indent', 'outdent']\n      },\n      textAlign: {\n        inDropdown: true,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['left', 'center', 'right', 'justify']\n      },\n      link: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        dropdownClassName: undefined,\n        showOpenOptionOnHover: true,\n        defaultTargetOption: '_self',\n        options: ['link', 'unlink'],\n        linkCallback: undefined\n      },\n      emoji: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        emojis: ['😀', '😁', '😂', '😃', '😉', '😋', '😎', '😍', '😗', '🤗', '🤔', '😣', '😫', '😴', '😌', '🤓', '😛', '😜', '😠', '😇', '😷', '😈', '👻', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '🙈', '🙉', '🙊', '👼', '👮', '🕵', '💂', '👳', '🎅', '👸', '👰', '👲', '🙍', '🙇', '🚶', '🏃', '💃', '⛷', '🏂', '🏌', '🏄', '🚣', '🏊', '⛹', '🏋', '🚴', '👫', '💪', '👈', '👉', '👉', '👆', '🖕', '👇', '🖖', '🤘', '🖐', '👌', '👍', '👎', '✊', '👊', '👏', '🙌', '🙏', '🐵', '🐶', '🐇', '🐥', '🐸', '🐌', '🐛', '🐜', '🐝', '🍉', '🍄', '🍔', '🍤', '🍨', '🍪', '🎂', '🍰', '🍾', '🍷', '🍸', '🍺', '🌍', '🚑', '⏰', '🌙', '🌝', '🌞', '⭐', '🌟', '🌠', '🌨', '🌩', '⛄', '🔥', '🎄', '🎈', '🎉', '🎊', '🎁', '🎗', '🏀', '🏈', '🎲', '🔇', '🔈', '📣', '🔔', '🎵', '🎷', '💰', '🖊', '📅', '✅', '❎', '💯']\n      },\n      embedded: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        embedCallback: undefined,\n        defaultSize: {\n          height: 'auto',\n          width: 'auto'\n        }\n      },\n      image: {\n        className: undefined,\n        component: undefined,\n        popupClassName: undefined,\n        urlEnabled: true,\n        uploadEnabled: true,\n        alignmentEnabled: true,\n        previewImage: false,\n        inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\n        uploadCallback: _this.upload,\n        alt: {\n          present: false,\n          mandatory: false\n        },\n        defaultSize: {\n          height: 'auto',\n          width: 'auto'\n        }\n      },\n      remove: {\n        className: undefined,\n        component: undefined\n      },\n      history: {\n        inDropdown: false,\n        className: undefined,\n        component: undefined,\n        dropdownClassName: undefined,\n        options: ['undo', 'redo']\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setEditor\", function (editor) {\n      _this.editor = editor;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEditorStateChange\", function (editorState) {\n      _this.setState({\n        editorState: editorState\n      });\n\n      _this.props.callBack('EDITOR', draftToHtml(convertToRaw(editorState.getCurrentContent())));\n    });\n\n    _this.state = {\n      editorState: EditorState.createEmpty()\n    };\n    return _this;\n  }\n\n  _createClass(WysiwygEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var value = this.props.valueTxt;\n\n      if (value && value != '') {\n        var contentState = ContentState.createFromBlockArray(convertFromHTML(value));\n        var editorState = EditorState.createWithContent(contentState);\n        this.setState({\n          editorState: editorState\n        });\n      }\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file) {\n      return new Promise(function (resolve, reject) {\n        var formData = new FormData();\n        formData.append('image', file);\n        Axios.post(config.host.upload + config.path.upload.upFile, formData, {\n          'Content-Type': 'multipart/form-data'\n        }).then(function (res) {\n          console.log(res.data);\n          resolve({\n            data: {\n              link: config.host.upload + res.data.imageLink\n            }\n          });\n        })[\"catch\"](function (err) {\n          console.log('error upload ', err);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var editorState = this.state.editorState;\n      return __jsx(\"div\", null, __jsx(WysiwygNoSSRWrapper, {\n        ref: this.setEditor,\n        editorState: editorState,\n        wrapperClassName: \"wysiwyg-wrapper\",\n        editorClassName: \"wysiwyg-editor\",\n        onEditorStateChange: this.onEditorStateChange,\n        toolbar: this.toolbar\n      }));\n    }\n  }]);\n\n  return WysiwygEditor;\n}(Component);\n\nexport default WysiwygEditor;","map":null,"metadata":{},"sourceType":"module"}